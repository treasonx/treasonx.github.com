
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>{TRX} James Morrin</title>
    <meta name="author" content="James Morrin">

    
    <meta name="description" content="Firefox LocalStorage Bug There is a small bug in firefox which may look like a data loss issue when using localStorage. I have filed a bug 746272 &hellip;">
    
    <meta name="viewport" content="width=device-width; initial-scale=1; maximum-scale=1">

    <link href="/atom.xml" rel="alternate" title="{TRX} James Morrin" type="application/atom+xml">
    <link rel="canonical" href="">
    <link href="/favicon.png" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    
    

</head>

<body>
	<header class="inner"><h1 class="left"><a href="/">{TRX} James Morrin</a></h1>
<nav class="menu left"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<div class="right">
	<form class="search right" action="http://google.com/search" method="get">
		<input class="left" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:treasonx.github.com">
	</form>
	<div class="social right">
		
		
		<a class="google" href="https://plus.google.com/106674157563775429543" title="Google+">Google+</a>
		
		
		<a class="twitter" href="http://twitter.com/treasonx" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/treasonx" title="GitHub">GitHub</a>
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</div>

</header>
	
<div id="banner" class="inner">
	<div class="container">
    <img style="float:left;width:30px;"src="/images/JamesTransparent.png">
		<ul class="feed"></ul>
	</div>
	<small><a href="http://twitter.com/treasonx">treasonx</a> @ <a href="http://twitter.com">Twitter</a></small>
	<div class="loading">Loading...</div>
</div>
<script src="/javascripts/twitter.js"></script>
<script type="text/javascript">
	(function($){
		$('#banner').getTwitterFeed('treasonx', 4, false);
	})(jQuery);
</script>


	<div id="content" class="inner">


    <article class="post">
    <h1 class="title"><a href="/blog/2012/05/08/firefox-localstorage-bug/">Firefox LocalStorage Bug</a></h1>
    <div class="entry">
        <p>There is a small bug in firefox which may look like a data loss issue when using localStorage. I have filed a <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=746272">bug 746272</a> and they have fixed the issue but this will be with us as web developers for a long time.</p>

<p>The bug shows up if you do the following. If your first interaction with localStorage is a removeItem you will not get the proper length from the localStorage object. It will seem as though all of the items in localStorage have been deleted. This is not the case, the browser just hasn&#8217;t updated its cache with the contents of localStoage.</p>

<p><strong>Work Around</strong></p>

<p>The workaround for now is to get the length of the localStorage object before any other operation with localStorage so that it works as expected.</p>

<p>This bug was tricky to isolate in my web app and it looked like I was losing user data when the page was reloaded. I boiled it down to a simple test case and the folks at mozilla had it fixed right away.</p>

        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2012-05-08T07:04:00-04:00" pubdate data-updated="true">May 8<span>th</span>, 2012</time></div>
        <div class="tags">

<div class="cat">
  
    <a class='category' href='/blog/categories/browser/'>browser</a>, <a class='category' href='/blog/categories/bugs/'>bugs</a>, <a class='category' href='/blog/categories/html5/'>html5</a>
  
</div>

</div>
        
        <span class="comments"><a href="/blog/2012/05/08/firefox-localstorage-bug/#disqus_thread">Comments</a></span>
        
    </div>
</article>

<nav id="pagenavi">
    
    
    <a href="/blog/archives" class="center">Blog Archives</a>
</nav></div>
	<footer class="inner">Copyright &copy; 2012

    James Morrin

</footer>
	<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script src="/javascripts/slash.js"></script>


<script type="text/javascript">
      var disqus_shortname = 'treasonx';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



</body>
</html>